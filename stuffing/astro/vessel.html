<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Data Vessel – Astro</title>
  <link rel="stylesheet" href="../assets/css/base.css">
  <link rel="stylesheet" href="../assets/css/theme-astro.css">
</head>
<body>
  <div class="container">
    <h1 id="vesselTitle"></h1>

    <form id="voyageForm">
      <input type="text" id="voyageNumber" placeholder="Masukkan Voyage..." required>
      <button type="submit">Tambah Voyage</button>
    </form>

    <ul id="voyageList"></ul>

    <button onclick="history.back()">⬅️ Kembali ke List</button>
  </div>

  <script>
    const vesselName = localStorage.getItem("current_vessel");
    document.getElementById("vesselTitle").textContent = "Vessel: " + vesselName;

    const voyageForm = document.getElementById("voyageForm");
    const voyageList = document.getElementById("voyageList");
    const STORAGE_KEY = "voyages_" + vesselName;

    let voyages = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];

    function renderVoyages() {
      voyageList.innerHTML = "";
      voyages.forEach((v, i) => {
        voyageList.insertAdjacentHTML(
          "beforeend",
          `<li>${v} <button onclick="deleteVoyage(${i})">Hapus</button></li>`
        );
      });
    }

    function deleteVoyage(i) {
      voyages.splice(i, 1);
      localStorage.setItem(STORAGE_KEY, JSON.stringify(voyages));
      renderVoyages();
    }

    voyageForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const val = voyageForm.voyageNumber.value.trim();
      if (val) {
        voyages.push(val);
        localStorage.setItem(STORAGE_KEY, JSON.stringify(voyages));
        voyageForm.reset();
        renderVoyages();
      }
    });

    renderVoyages();
  </script>
</body>
</html>
