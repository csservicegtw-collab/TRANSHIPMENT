<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Stuffing Data</title>
  <link rel="stylesheet" href="../../assets/css/style.css">
</head>
<body>
  <div class="overlay"></div>
  <div class="container">
    <h1>Daftar Vessel â€“ [Nama Agent]</h1>

    <!-- Filter -->
    <div class="filter-box">
      <strong>Filter Vessel:</strong><br>
      <label><input type="checkbox" value="All" checked onchange="filterVessel()"> Semua</label>
      <label><input type="checkbox" value="Voyage A" onchange="filterVessel()"> Voyage A</label>
      <label><input type="checkbox" value="Voyage B" onchange="filterVessel()"> Voyage B</label>
      <input type="text" id="searchBox" placeholder="Cari vessel..." onkeyup="searchVessel()" style="margin-left:10px; padding:5px;">
    </div>

    <div class="table-container">
      <table id="vesselTable">
        <thead>
          <tr>
            <th>Vessel</th>
            <th>Voyage</th>
            <th>Shipper</th>
            <th>Marking / Cnee</th>
            <th>Destination</th>
            <th>MKT</th>
            <th>UP DLC</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody id="dataBody"></tbody>
      </table>
    </div>

    <div style="text-align:center; margin-top:25px;">
      <button class="button-3d" style="background:#e67e22;" onclick="addRow()">Tambah Data</button>
      <button class="button-3d" style="background:#e74c3c;" onclick="window.location.href='../index.html'">Kembali</button>
    </div>
  </div>

  <script>
    const data = [
      {vessel:'HYUNDAI GLORY', voyage:'001A', shipper:'ABC Cargo', cnee:'Marking A', destination:'Singapore', mkt:'01', updlc:'DL1'},
      {vessel:'MSC HOPE', voyage:'002B', shipper:'XYZ Lines', cnee:'Marking B', destination:'Hong Kong', mkt:'02', updlc:'DL2'}
    ];

    function renderTable() {
      const body = document.getElementById("dataBody");
      body.innerHTML = "";
      data.forEach((d, i) => {
        body.innerHTML += `
          <tr>
            <td>${d.vessel}</td>
            <td>${d.voyage}</td>
            <td>${d.shipper}</td>
            <td>${d.cnee}</td>
            <td>${d.destination}</td>
            <td>${d.mkt}</td>
            <td>${d.updlc}</td>
            <td>
              <button class="action-btn edit-btn" onclick="editRow(${i})">âœŽ</button>
              <button class="action-btn delete-btn" onclick="deleteRow(${i})">ðŸ—‘</button>
            </td>
          </tr>
        `;
      });
    }

    function addRow() {
      const v = prompt("Nama Vessel?");
      if(!v) return;
      data.push({vessel:v, voyage:'', shipper:'', cnee:'', destination:'', mkt:'', updlc:''});
      renderTable();
    }

    function editRow(i) {
      const v = prompt("Ubah nama Vessel:", data[i].vessel);
      if(v) data[i].vessel = v;
      renderTable();
    }

    function deleteRow(i) {
      if(confirm("Hapus data ini?")) {
        data.splice(i,1);
        renderTable();
      }
    }

    function searchVessel() {
      const q = document.getElementById("searchBox").value.toLowerCase();
      const rows = document.querySelectorAll("#vesselTable tbody tr");
      rows.forEach(r => {
        r.style.display = r.textContent.toLowerCase().includes(q) ? "" : "none";
      });
    }

    function filterVessel() {
      const checked = Array.from(document.querySelectorAll('.filter-box input[type="checkbox"]:checked')).map(c => c.value);
      const rows = document.querySelectorAll("#vesselTable tbody tr");
      rows.forEach(r => {
        const voyage = r.children[1].textContent;
        if (checked.includes("All") || checked.includes(voyage)) {
          r.style.display = "";
        } else {
          r.style.display = "none";
        }
      });
    }

    renderTable();
  </script>
</body>
</html>
